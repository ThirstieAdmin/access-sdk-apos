{# modules/theme/views/customStyles.html #}

{% if data.global %}

  {% set headerHeight = apos.modules['theme-widget'].calcHeaderHeight(data, 0) %}

  <link rel="stylesheet" type="text/css" href="https://cdn.thirstie.cloud/css/latest/thirstiebase.css" />
  <link rel="stylesheet" type="text/css" href="https://cdn.thirstie.cloud/css/latest/thirstieecomm.css" />

  <style>
    :root {
      /* Standard values */
      --th-c-white: #FFF;
      --th-c-smokywhite: #FAFAFA;
      --th-c-light: #e4e4e4;
      --th-c-greysLightestGrey: #F2F2F2;
      --th-c-greysLightGrey: #aaa;
      --th-c-greysMediumLightGrey: #BDBDBD;
      --th-c-greysMediumDarkGrey: #828282;
      --th-c-greysDarkGrey: #4F4F4F;
      --th-c-dark: #242424;
      --th-c-black: #000;

      --th-c-greysDisabledGrey: var(--th-c-greysMediumLightGrey);
      --th-c-black-Blur: rgba(0, 0, 0, 0.14);
      --th-c-blackLight-Blur: rgba(0, 0, 0, 0.2);
      --th-c-blackLightest-Blur: rgba(0, 0, 0, 0.12);
      --th-c-greysMediumDarkGrey-Blur: rgba(130,130,130, .25);

      --th-c-alertWrongPrimary: #B71C1C;
      --th-c-alertWrongTint: #FFE0E3;
      --th-c-alertSuccessPrimary: #1B5E20;
      --th-c-alertSuccessTint: #E3FAE4;
      --th-c-alertWarningPrimary: #BA8808;
      --th-c-alertWarningTint: #FFF1CC;

      --th-c-lavendarIndigoLight: #646cff;
      --th-c-fuchsia: #E600B4;
      --th-c-paleYellow: #FFF8E1;
      --th-c-seafoamGreen: #00C49A;
      --th-c-cobaltBlue: #0047AB;
      --th-c-forestGreen: #228B22;
      --th-c-orange: #FF6F00;

      --th-standard-sanserif: Inter, system-ui, Avenir, Helvetica Neue, Helvetica, Arial, sans-serif;
      --th-standard-serif: Merriweather, Palatino, Palatino Linotype, Palatino LT STD, Book Antiqua, Georgia, serif;
      --th-standard-monospace: SF Mono, SF Mono-Regular, Consolas, "Liberation Mono", Menlo, Courier, monospace;

      /* Style design tokens */

      --primary-color: {{ data.global.primaryColor or '#000' }};
      --primary-contrasting-color: {{ data.global.primaryContrastingColor or '#fff' }};
      --secondary-color: {{ data.global.secondaryColor or '#fff' }};
      --secondary-contrasting-color: {{ data.global.secondaryContrastingColor or '#000' }};

      --th-color-scheme: light dark;
      --th-font-family: var(--primary-font-family, var(--th-standard-sanserif));
      --th-font-weight: 400;
      --th-line-height: 1.5;
      --th-border-radius: {{ data.global.borderRadius or '4px' }};
      --th-btn-border-radius: {{ data.global.buttonBorderRadius or data.global.borderRadius or '4px' }};
      --th-border-color: var(--th-c-greysMediumLightGrey);
      --th-border-form: 1px solid var(--th-border-color);
      --th-input-focus-outline: 2px solid var(--th-c-greysDarkGrey);
      --th-header-dividers: 1px solid var(--th-c-greysLightestGrey);
      --th-account-dividers: 1px solid var(--th-c-gray);

      --th-pdp-btn-disabled-bg: var(--th-c-greysMediumLightGrey);
      --th-pdp-btn-disabled-color: var(--th-c-white);

      /* customStyles: global settings */
      --banner-text-color: {{ apos.modules['theme-widget'].convertPreset(data.global.siteBannerTextColor) or data.global.primaryColor or '#000' }};
      --banner-background-color: {{ apos.modules['theme-widget'].convertPreset(data.global.siteBannerBackgroundColor) or data.global.primaryContrastingColor or '#fff' }};
      --banner-font-family: {{ data.global.siteBannerFontFamily or 'var(--th-standard-sanserif)' }};
      --header-offset: {{ headerHeight }}px;
      --header-background-color: {{ apos.modules['theme-widget'].convertPreset(data.global.headerBackgroundColor) or data.global.primaryColor or '#000' }};
      --header-text-color: {{ apos.modules['theme-widget'].convertPreset(data.global.headerTextColor) or data.global.primaryContrastingColor or '#fff' }};
      --header-icon: var(--header-text-color);
      --footer-background-color: {{ apos.modules['theme-widget'].convertPreset(data.global.footerBackgroundColor) or data.global.secondaryColor or '#fff' }};
      --footer-text-color: {{ apos.modules['theme-widget'].convertPreset(data.global.footerTextColor) or data.global.secondaryContrastingColor or '#000' }};
      --footer-height: {{ data.global.footerHeight or '40vh' }};
      --th-c-header-icon-count: var(--header-background-color);
      --th-availability-bg: {{ apos.modules['theme-widget'].convertPreset(data.global.locationBG) or data.global.primaryContrastingColor or '#fff' }};
      --th-availability-border: {{ apos.modules['theme-widget'].convertPreset(data.global.locationBorderColor) or 'var(--th-c-light)' }};
      --th-availability-text-color: {{ apos.modules['theme-widget'].convertPreset(data.global.locationTextColor) or 'var(--primary-color)' }};
      --th-zip-entry-bg: var(--th-availability-bg);
      --th-zip-entry-border: var(--th-availability-border);
      --th-ag-modal-width: 100vw;
      --th-ag-modal-height: 100vh;
      --th-ag-form-btn-border-radius: {{ data.global.ageGateButtonBorderRadius or data.global.borderRadius or '4px' }};
      --th-ag-form-bg: {{ apos.modules['theme-widget'].convertPreset(data.global.ageGateFormBG) or 'transparent' }};
      --th-ag-textcolor: {{ apos.modules['theme-widget'].convertPreset(data.global.ageGateTextColor) or data.global.primaryContrastingColor or '#fff' }};
      --th-ag-form-input-bg: {{ apos.modules['theme-widget'].convertPreset(data.global.ageGateFormInputBG) or data.global.secondaryColor or 'transparent' }};
      --th-ag-form-input-text: {{ apos.modules['theme-widget'].convertPreset(data.global.ageGateFormInputTextColor) or data.global.secondaryContrastingColor or '#000' }};
      --th-ag-form-btn-bg: {{ apos.modules['theme-widget'].convertPreset(data.global.ageGateButtonBG) or 'transparent' }};
      --th-ag-form-btn-border: {{ data.global.ageGateButtonBorder or '1px solid var(--th-c-greysMediumLightGrey)' }};
      --th-ag-form-btn-border-bottom: var(--th-ag-form-btn-border);
      --th-ag-form-input-border: {{ data.global.ageGateInputBorder or '1px solid var(--th-c-greysMediumLightGrey)' }};
      --th-ag-form-input-border-radius: {{ data.global.ageGateInputBorderRadius or 'var(--th-border-radius, 4px)' }};

      /* Checkout and cart styling tokens */
      --th-checkout-breadcrumb-completed: var(--th-c-brandPrimaryColor, var(--th-c-dark));
      --th-checkout-breadcrumb-inactive: var(--th-c-greysDisabledGrey);

      --th-c-cart-message-bg: var(--th-c-greysLightestGrey);
      --th-c-cart-message-text-color: var(--th-c-alertWarningPrimary);

      --th-checkout-bg: var(--th-c-smokywhite, #fafafa);  /* .th-checkout */
      --th-checkout-container-bg: var(--th-checkout-bg); /* .th-checkout-section--container */
      --th-checkout-container-text-color: var(--th-c-dark, #242424); /* .th-checkout-form--container */

      --th-checkout-payment-border: var(--th-border-form);
      --th-checkout-payment-border-radius: var(--th-border-radius);
      --th-checkout-payment-background-color: var(--th-c-white);
      --th-checkout-payment-text-color: var(--th-c-dark);
      --th-checkout-payment-header-color: var(--th-checkout-payment-text-color);
      --th-checkout-payment-input-border: var(--th-border-form);
      --th-checkout-payment-input-bg: var(--th-c-white);
      --th-checkout-payment-input-text-color: var(--th-c-black);
      --th-checkout-payment-placeholder-text-color: var(--th-c-greysMediumDarkGrey);
      --th-checkout-payment-input-focus-outline: var(--th-input-focus-outline);

      --th-image-widget__caption-text-color: var(--th-c-white);
      --th-image-widget__caption-bg: rgba(0, 0, 0, .4);
      --th-image-widget__caption-border-radius: 0;
      --th-image-widget__caption-font-size: 2rem;
      --th-image-widget__caption-font-family:inherit;
      --th-image-widget__caption-font-style: normal;
      --th-image-widget__caption-font-weight: normal;
      --th-image-widget__caption-padding: 0 1rem;
      --th-image-widget__caption-text-align:center;
      --th-image-widget__caption-flex-align:center;
      --th-image-widget__caption-flex-justify:center;
    }
  </style>

  {% if data.user %}
    <style>
      .th-fouc-block {
        visibility: inherit;
        opacity: inherit;
        display: inherit;
      }
    </style>
  {% else %}
    <style>
      .th-fouc-block {
        visibility: visible;
        opacity: 0;
        display: none;
      }
    </style>
  {% endif %}

  {% if data.global.footerBackgroundImage.items | length %}
    {% set footerBackgroundImg = apos.image.first(data.global.footerBackgroundImage) %}
    {% set footerBackgroundImgUrl = apos.attachment.url(footerBackgroundImg, { size: 'full' }) %}
    <style>
      .th-footer-background {
        --footer-bg-img: url({{ footerBackgroundImgUrl }});
        background-image:
          linear-gradient(to bottom, var(--footer-background-color, rgba(50, 50, 50, 0.5)) 0%, var(--footer-background-color, rgba(50, 50, 50, 0.5)) 100%),
          var(--footer-bg-img);
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        background-clip: border-box;
      }
    </style>
  {% else %}
    <style>
      .th-footer-background {
        background-color: var(--footer-background-color, var(--secondary-color));
      }
    </style>
  {% endif %}

  {% if data.global.bodyBackgroundImage.items | length %}
    {% set bodyBackgroundImg = apos.image.first(data.global.bodyBackgroundImage) %}
    {% set bodyBackgroundImgUrl = apos.attachment.url(bodyBackgroundImg, { size: 'full' }) %}
    <style>
      :root {
        --body-background-image: url({{ bodyBackgroundImgUrl }});
      }
    </style>
  {% else %}
    <style>
      :root {
        --body-background-image: none;
      }
    </style>
  {% endif %}

{% endif %}
